@base           <http://graphity.org/blog>

#@prefix :       <#> .
@prefix gcs:    <http://graphity.org/gcs#> .
@prefix gc:     <http://graphity.org/gc#> .
@prefix gp:     <http://graphity.org/gp#> .
@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:    <http://www.w3.org/2001/XMLSchema#> .
@prefix owl:    <http://www.w3.org/2002/07/owl#> .
@prefix ldp:    <http://www.w3.org/ns/ldp#> .
@prefix sd:     <http://www.w3.org/ns/sparql-service-description#> .
@prefix sp:     <http://spinrdf.org/sp#> .
@prefix spin:   <http://spinrdf.org/spin#> .
@prefix spl:    <http://spinrdf.org/spl#> .
@prefix dqc:	<http://semwebquality.org/ontologies/dq-constraints#> .
@prefix dct:    <http://purl.org/dc/terms/> .
@prefix lda:    <http://purl.org/linked-data/api/vocab#> .
@prefix void:   <http://rdfs.org/ns/void#> .
@prefix sioc:   <http://rdfs.org/sioc/ns#> .
@prefix foaf:   <http://xmlns.com/foaf/0.1/> .

<#> a owl:Ontology ;
    owl:imports gcs:, lda: , void:, foaf:, dqc: ;
    rdfs:label "Blog sitemap" ;
    dct:created "2013-03-09T13:53:00+03:00"^^xsd:dateTime .

# RESOURCE CLASSES (GRAPHITY TEMPLATES)

<#Space> a owl:Class, gp:Template ;
     rdfs:subClassOf gp:Resource, foaf:Document, sioc:Space, ldp:Container, lda:ListEndpoint ;
     gp:uriTemplate "/" ;
     spin:query gp:DescribeWithChildren ;
     gp:limit 20 ;
     gc:defaultMode gc:ListMode ;
     # gc:mode gc:ListReadMode, gc:ListMode, gc:TableMode, gc:ThumbnailMode ;
     rdfs:label "Homepage" ;
     rdfs:isDefinedBy <#> .

<#PostContainer> a owl:Class, gp:Template ;
    rdfs:subClassOf foaf:Document, sioc:Container, ldp:Container, lda:ListEndpoint ;
    gp:uriTemplate "/posts" ;
    gp:limit 20 ;
    gp:orderBy "title"^^xsd:string ;
    gc:defaultMode gc:ListReadMode ;
    gc:mode gc:ListReadMode, gc:ListMode, gc:TableMode, gc:ThumbnailMode, gc:CreateMode ;
    spin:query gp:DescribeWithChildren ;
    rdfs:label "Post container" ;
    rdfs:isDefinedBy <#> .

<#PostDocument> a rdfs:Class, owl:Class, gp:Template ;
    rdfs:subClassOf foaf:Document, lda:ItemEndpoint , # <#Document>
        [ a owl:Restriction ;
            owl:onProperty sioc:has_container ;
            owl:allValuesFrom <#PostContainer>
        ] ;
    gp:uriTemplate "/posts/{slug}" ;
    gp:skolemTemplate "/{slug}" ;
    gc:mode gc:ReadMode ;
    gc:defaultMode gc:ReadMode ;
    gp:cacheControl "public, max-age=3600" ;
    spin:query gp:Describe ;
    spin:constraint [ a dqc:MissingProperties ;
	    sp:arg1 <#PostDocument> ;
	    sp:arg2 gp:slug
	] ,
        [ a dqc:MissingProperties ;
	    sp:arg1 <#PostDocument> ;
	    sp:arg2 dct:title
	] ,
        [ a dqc:MissingProperties ;
	    sp:arg1 <#PostDocument> ;
	    sp:arg2 sioc:content
	] ;
    rdfs:label "Post document" ;
    rdfs:isDefinedBy <#> .